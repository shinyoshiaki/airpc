{"version":3,"file":"multi.test.js","sourceRoot":"","sources":["../../__tests__/multi.test.ts"],"names":[],"mappings":";;;AAAA,qCAAsC;AACtC,mDAAwC;AACxC,+DAAmE;AACnE,gCAA8B;AAE9B,IAAI,CACF,OAAO,EACP,GAAS,EAAE;IACT,MAAM,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CACjC,UAAI,CACF,mBAAU,EACV,oCAAoB,CAClB,IAAI,uBAAM,CAAC,aAAa,EAAE;QACxB,UAAU,EAAE,EAAE,IAAI,EAAE,uBAAuB,EAAE;KAC9C,CAAC,CACH,CACF,CACF,CAAC;IAEF,KAAK,IAAI,MAAM,IAAI,GAAG,EAAE;QACtB,MAAM,CAAC,MAAM,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC9C,MAAM,CAAC,MAAM,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC9C,MAAM,IAAI,GAAG,MAAM,MAAM,CAAC,OAAO,EAAE,CAAC;QACpC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC7B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAC5B;AACH,CAAC,CAAA,EACD,KAAM,GAAG,EAAE,CACZ,CAAC","sourcesContent":["import { TestWorker } from \"./worker\";\nimport { Worker } from \"worker_threads\";\nimport { workerThreadsWrapper } from \"../src/module/workerThreads\";\nimport { wrap } from \"../src\";\n\ntest(\n  \"multi\",\n  async () => {\n    const arr = [...Array(2)].map(() =>\n      wrap(\n        TestWorker,\n        workerThreadsWrapper(\n          new Worker(\"./worker.js\", {\n            workerData: { path: \"./__tests__/worker.ts\" }\n          })\n        )\n      )\n    );\n\n    for (let linked of arr) {\n      expect(await linked.increment(777)).toBe(778);\n      expect(await linked.decrement(777)).toBe(776);\n      const json = await linked.getJson();\n      expect(json.a.b.c).toBe(\"d\");\n      expect(json.a.b.n).toBe(0);\n    }\n  },\n  60_000 * 60\n);\n"]}